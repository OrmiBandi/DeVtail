{% extends "base.html" %}

{% block title %}
Ïä§ÌÑ∞Îîî Î¶¨Ïä§Ìä∏
{% endblock %}
{% block content %}
    <!-- <h1><a href="{% url 'studies:study_list' %}">Study List</a></h1>
    {% for tag in tags %}
        <a href="{% url 'studies:study_list' %}?tag={{ tag }}">#{{ tag }} </a>
    {% endfor %} -->
    <div class="flex justify-between mx-auto w-11/12 px-2 py-2 sm:px-6 sm:py-6 lg:px-8 lg:py-8">
        <a class="font-bold text-2xl" href="{% url 'studies:study_list' %}">Ïä§ÌÑ∞Îîî Î™©Î°ù</a>
        <div class="form-control">
            <form action="{% url 'studies:study_list' %}" method="GET">
                <input name="q" type="text" placeholder="üîçÏä§ÌÑ∞Îîî Í≤ÄÏÉâ" class="input input-bordered w-auto border-2 focus:outline-none focus:border-4"/>
                <!--  ÌïÑÌÑ∞ Í∏∞Îä• Ï∂îÍ∞Ä Ïπ¥ÌÖåÍ≥†Î¶¨ÏôÄ ÎÇúÏù¥ÎèÑ ÏÑ†ÌÉùÌï† Ïàò ÏûàÎèÑÎ°ù -->
                <select name="category" class="select select-bordered w-auto border-2 focus:outline-none focus:border-4">
                    <option value="">Ïπ¥ÌÖåÍ≥†Î¶¨</option>
                    {% for category in categories %}
                    <option value="{{ category }}">{{ category }}</option>
                    {% endfor %}
                </select>
                <select name="difficulty" class="select select-bordered w-auto border-2 focus:outline-none focus:border-4">
                    <option value="">ÎÇúÏù¥ÎèÑ</option>
                    {% for difficulty in difficulty_choices %}
                    <!-- difficulty_choices = [
                        ("ÏÉÅ", "ÏÉÅ"),
                        ("Ï§ë", "Ï§ë"),
                        ("Ìïò", "Ìïò"),
                    ] -->
                    <option value="{{ difficulty.0 }}">{{ difficulty.1 }}</option>
                    {% endfor %}
                </select>
            </form>
        </div>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4 mx-auto w-11/12 px-2 sm:px-6 lg:px-8">
        {% for study in studies %}
        <a href="{% url 'studies:study_detail' study.id %}">
            <div class="card card-side border bg-base-100 shadow-xl">
                <div class="card-body">
                    <div class="flex justify-between">
                        <div>
                            <button class="btn btn-sky200 min-w-0" onClick="event.preventDefault(); location.href='{% url 'studies:study_list' %}?category={{ study.category }}'">{{ study.category }}</button>
                            <button class="btn btn-sky200 min-w-0" onClick="event.preventDefault(); location.href='{% url 'studies:study_list' %}?difficulty={{ study.difficulty }}'">{{ study.difficulty }}</button>
                        </div>
                        <div>
                            <form action="{% url 'studies:favorite_study_create' study.id %}" method="POST">
                                {% csrf_token %}
                                <!-- Ï≤¥ÌÅ¨ ÏÇ¨Ìï≠ 1Î≤à. Ï¶êÍ≤®Ï∞æÍ∏∞Ïóê ÏóÜÏùÑ Í≤ΩÏö∞ unchecked Ïù¥ÎØ∏ÏßÄÎ°ú, ÏûàÏùÑ Í≤ΩÏö∞ checked Ïù¥ÎØ∏ÏßÄÎ°ú Î≥ÄÍ≤ΩÎêòÎèÑÎ°ù Ìï¥ÏïºÌï®. -->
                                <input type="image" src="/static/assets/images/favorite_img_unchecked.png" alt="favorite" width="30" height="30">
                            </form>
                        </div>
                    </div>
                    <h2 class="card-title mt-4">{{ study.title }}</h2>
                    <div class="flex gap-4">
                        <div class="avatar">
                            <div class="w-16 rounded-full">
                                {% if not study.get_study_leader.user.profile_image %}
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M304 128a80 80 0 1 0 -160 0 80 80 0 1 0 160 0zM96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM49.3 464H398.7c-8.9-63.3-63.3-112-129-112H178.3c-65.7 0-120.1 48.7-129 112zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3z"/></svg>
                                {% elif 'http' in user.profile_image.url %}
                                <img src="{{ study.get_study_leader.user.profile_image }}"/>
                                {% else %}
                                <img src="{{ study.get_study_leader.user.profile_image.url }}"/>
                                {% endif %}
                            </div>
                        </div>
                        <div class="flex flex-col justify-center">
                            <div>{{ study.get_study_leader.user.nickname }}</div>
                            <div>{{ study.start_at }}</div>
                        </div>
                        <div class="flex gap-4 self-center">
                            <img src="/static/assets/images/members_count_img.png" alt="members_count" width="30px" height="20px">
                            <span>{{ study.get_current_member }}/{{ study.max_member }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>

    <div class="mx-auto w-11/12 px-2 py-2 sm:px-6 sm:py-6 lg:px-8 lg:py-8">
        <div class="flex justify-center">
            <div class="pagination">
                <span class="pagination-item">
                    <a href="?page=1" class="pagination-link">1</a>
                </span>
                <span class="pagination-item">
                    <a href="?page=2" class="pagination-link">2</a>
                </span>
            </div>
        </div>
        <div class="flex justify-end">
            <button class="btn" onClick="location.href='{% url 'studies:study_create' %}'">Ïä§ÌÑ∞Îîî ÏÉùÏÑ±</button>
        </div>
    </div>
{% endblock %}
    </body>
</html>
